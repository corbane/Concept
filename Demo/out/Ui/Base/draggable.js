function defaultConfig() {
    return {
        handles: [],
        minVelocity: 0,
        maxVelocity: 1,
        onStartDrag: () => { },
        onDrag: () => { },
        onStopDrag: () => true,
        onEndAnimation: () => { },
        velocityFactor: (window.innerHeight < window.innerWidth
            ? window.innerHeight : window.innerWidth) / 2,
    };
}
var is_drag = false;
var pointer;
// https://gist.github.com/gre/1650294
var EasingFunctions = {
    linear: (t) => t,
    easeInQuad: (t) => t * t,
    easeOutQuad: (t) => t * (2 - t),
    easeInOutQuad: (t) => t < .5 ? 2 * t * t : -1 + (4 - 2 * t) * t,
    easeInCubic: (t) => t * t * t,
    easeOutCubic: (t) => (--t) * t * t + 1,
    easeInOutCubic: (t) => t < .5 ? 4 * t * t * t : (t - 1) * (2 * t - 2) * (2 * t - 2) + 1,
    easeInQuart: (t) => t * t * t * t,
    easeOutQuart: (t) => 1 - (--t) * t * t * t,
    easeInOutQuart: (t) => t < .5 ? 8 * t * t * t * t : 1 - 8 * (--t) * t * t * t,
    easeInQuint: (t) => t * t * t * t * t,
    easeOutQuint: (t) => 1 + (--t) * t * t * t * t,
    easeInOutQuint: (t) => t < .5 ? 16 * t * t * t * t * t : 1 + 16 * (--t) * t * t * t * t
};
export function draggable(options) {
    const config = defaultConfig();
    var is_active = false;
    var is_animate = false;
    var current_event;
    var start_time = 0;
    var start_x = 0;
    var start_y = 0;
    var velocity_delay = 500;
    var velocity_x;
    var velocity_y;
    var current_animation = -1;
    updateConfig(options);
    function updateConfig(options) {
        if (is_drag) {
            return;
        }
        if (navigator.maxTouchPoints > 0)
            document.body.style.touchAction = "none";
        disableEvents();
        Object.assign(config, options);
        enableEvents();
    }
    function addHandles(...handles) {
        for (const h of handles) {
            if (!config.handles.includes(h))
                config.handles.push(h);
        }
        if (is_active) {
            desactivate();
            activate();
        }
    }
    function activate() {
        enableEvents();
        is_active = true;
    }
    function desactivate() {
        disableEvents();
        is_active = false;
    }
    return {
        updateConfig,
        addHandles,
        isActive: () => is_active,
        activate,
        desactivate,
    };
    function enableEvents() {
        for (const h of config.handles)
            h.addEventListener("pointerdown", onStart, { passive: true });
    }
    function disableEvents() {
        for (const h of config.handles)
            h.removeEventListener("pointerdown", onStart);
    }
    function onStart(event) {
        if (is_drag) {
            console.warn("Tentative de démarrage des événements "
                + "\"draggable \" déjà en cours.");
            return;
        }
        if (is_animate) {
            stopVelocityFrame();
        }
        pointer = event.touches
            ? event.touches[0]
            : event;
        window.addEventListener("pointermove", onMove);
        window.addEventListener("pointerup", onEnd);
        disableEvents();
        current_animation = window.requestAnimationFrame(onAnimationStart);
        is_drag = true;
    }
    function onMove(event) {
        if (is_drag == false)
            return;
        pointer = event.touches !== undefined
            ? event.touches[0]
            : event;
    }
    function onEnd(event) {
        window.removeEventListener("pointermove", onMove);
        window.removeEventListener("pointerup", onEnd);
        enableEvents();
        is_drag = false;
    }
    function onAnimationStart(now) {
        start_x = pointer.clientX;
        start_y = pointer.clientY;
        start_time = now;
        current_event = {
            delay: 0,
            x: 0,
            y: 0,
            offsetX: 0,
            offsetY: 0,
            targetX: 0,
            targetY: 0,
        };
        config.onStartDrag();
        current_animation = window.requestAnimationFrame(onAnimationFrame);
    }
    function onAnimationFrame(now) {
        const { velocityFactor } = config;
        const x = pointer.clientX - start_x;
        const y = start_y - pointer.clientY;
        const delay = now - start_time;
        const offsetDelay = delay - current_event.delay;
        const offsetX = x - current_event.x;
        const offsetY = y - current_event.y;
        current_event = {
            delay,
            x,
            y,
            targetX: x,
            targetY: y,
            offsetX,
            offsetY,
        };
        if (is_drag) {
            config.onDrag(current_event);
            current_animation = window.requestAnimationFrame(onAnimationFrame);
        }
        else {
            start_time = now;
            start_x = x;
            start_y = y;
            velocity_x = velocityFactor * norm(offsetX / offsetDelay);
            velocity_y = velocityFactor * norm(offsetY / offsetDelay);
            current_event.targetX += velocity_x;
            current_event.targetY += velocity_y;
            if (config.onStopDrag(current_event) === true) {
                is_animate = true;
                current_animation = window.requestAnimationFrame(onVelocityFrame);
            }
        }
        function norm(value) {
            if (value < -1)
                return -1;
            if (value > 1)
                return 1;
            return value;
        }
    }
    function onVelocityFrame(now) {
        const delay = now - start_time;
        const t = delay >= velocity_delay
            ? 1
            : delay / velocity_delay;
        const factor = EasingFunctions.easeOutQuart(t);
        const offsetX = velocity_x * factor;
        const offsetY = velocity_y * factor;
        current_event.x = start_x + offsetX;
        current_event.y = start_y + offsetY;
        current_event.offsetX = velocity_x - offsetX;
        current_event.offsetY = velocity_y - offsetY;
        config.onDrag(current_event);
        if (t == 1) {
            is_animate = false;
            config.onEndAnimation(current_event);
            return;
        }
        current_animation = window.requestAnimationFrame(onVelocityFrame);
    }
    function stopVelocityFrame() {
        is_animate = false;
        window.cancelAnimationFrame(current_animation);
        config.onEndAnimation(current_event);
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZHJhZ2dhYmxlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vVWkvQmFzZS9kcmFnZ2FibGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBMEJBLFNBQVMsYUFBYTtJQUVqQixPQUFPO1FBQ0YsT0FBTyxFQUFTLEVBQUU7UUFDbEIsV0FBVyxFQUFLLENBQUM7UUFDakIsV0FBVyxFQUFLLENBQUM7UUFDakIsV0FBVyxFQUFLLEdBQUcsRUFBRSxHQUFFLENBQUM7UUFDeEIsTUFBTSxFQUFVLEdBQUcsRUFBRSxHQUFFLENBQUM7UUFDeEIsVUFBVSxFQUFNLEdBQUcsRUFBRSxDQUFDLElBQUk7UUFDMUIsY0FBYyxFQUFFLEdBQUcsRUFBRSxHQUFFLENBQUM7UUFDeEIsY0FBYyxFQUFFLENBQUMsTUFBTSxDQUFDLFdBQVcsR0FBRyxNQUFNLENBQUMsVUFBVTtZQUN4QyxDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUM7S0FDaEUsQ0FBQTtBQUNOLENBQUM7QUFFRCxJQUFJLE9BQU8sR0FBTSxLQUFLLENBQUE7QUFDdEIsSUFBSSxPQUEyQixDQUFBO0FBRS9CLHNDQUFzQztBQUN0QyxJQUFJLGVBQWUsR0FBRztJQUNqQixNQUFNLEVBQVUsQ0FBRSxDQUFTLEVBQUcsRUFBRSxDQUFDLENBQUM7SUFDbEMsVUFBVSxFQUFNLENBQUUsQ0FBUyxFQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQztJQUNwQyxXQUFXLEVBQUssQ0FBRSxDQUFTLEVBQUcsRUFBRSxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUM7SUFDeEMsYUFBYSxFQUFHLENBQUUsQ0FBUyxFQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxHQUFDLENBQUM7SUFDNUQsV0FBVyxFQUFLLENBQUUsQ0FBUyxFQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUM7SUFDdEMsWUFBWSxFQUFJLENBQUUsQ0FBUyxFQUFHLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxDQUFDO0lBQzVDLGNBQWMsRUFBRSxDQUFFLENBQVMsRUFBRyxFQUFFLENBQUMsQ0FBQyxHQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsQ0FBQyxHQUFDLENBQUM7SUFDekUsV0FBVyxFQUFLLENBQUUsQ0FBUyxFQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxDQUFDO0lBQ3hDLFlBQVksRUFBSSxDQUFFLENBQVMsRUFBRyxFQUFFLENBQUMsQ0FBQyxHQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUM7SUFDOUMsY0FBYyxFQUFFLENBQUUsQ0FBUyxFQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUM7SUFDbkUsV0FBVyxFQUFLLENBQUUsQ0FBUyxFQUFHLEVBQUUsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFDLENBQUMsR0FBQyxDQUFDLEdBQUMsQ0FBQztJ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